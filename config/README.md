# ntrip/config

Static application configuration files for use in swupdate images and full image builds.

These files are normally generated by `provision.sh` as part of a `make provision`.  In order to support an unattended swupdate load and configuration, they need to exist so that the yocto build system can reference them and incorporate them into either the swupdate file or the complete image file.

## Files

 1. etc-ntp.conf - Copied to `/etc/ntp.conf` and configures timesync via the onboard GPS
 2. gpsd.conf - Remembers what GPS to use for use by `provision.sh`; not needed on systems whose gpsd has lists of udev rules for the GPS chip in use.
 3. mavproxy.conf - Configures the mavproxy.service that runs mavproxy.py
 4. network.conf - Remembers the needed network parameters and makes `nmcli` calls to establish the network
 5. ntpd.conf - Remembers how time sync should be done (GPS or NET) for use by `provision.sh`

## Setup

These files are *ONLY RELEVANT* if you are building a full image or a swu image.  Because they keep track of static network provisioning they are inherently site- and node- specific.  A swupdate operation will overwrite any current configuration, so be aware of this when using.  Best if you fork the 'ntrip' module, create a branch, edit the configuration as needed and generate the 'ntrip-swu' image for that node.

```
make -C .. environment-update
```

Either follow the instructions, or in your bitbake console, do:
```
bitbake ntrip-swu
```

Your software update configuration will show up in `./tmp/deploy/images/$MACHINE/ntrip-swu-$MACHINE-YYYYMMDDHHMMSS.swu`

